https://www.youtube.com/watch?v=DL64HUQhHjY&list=PLzs415zFzEcOoJff3kiqip45raKg5j4a0&index=5&ab_channel=TekXtract

https://oracle-base.com/articles/linux/dns-configuration-for-scan

https://www.tecmint.com/install-bind-private-dns-server-on-rhel-8/

yum install bind-libs bind bind-utils -y

cp /etc/named.conf /etc/named.conf.orig

hostnamectl set-hostname dnssrv.localdomain dnssrv

[root@dnssrv named]# cat /etc/hosts
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6


192.168.100.149 dnssrv.localdomain dnssrv

[root@dnssrv named]# systemctl stop firewalld
[root@dnssrv named]# systemctl disable firewalld



[root@dnssrv named]# cat /etc/named.conf
//
// named.conf
//
// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS
// server as a caching only nameserver (as a localhost DNS resolver only).
//
// See /usr/share/doc/bind*/sample/ for example named configuration files.
//
// See the BIND Administrator's Reference Manual (ARM) for details about the
// configuration located in /usr/share/doc/bind-{version}/Bv9ARM.html

options {
        listen-on port 53 { 127.0.0.1;192.168.100.149; };
        //listen-on-v6 port 53 { ::1; };
        directory       "/var/named";
        dump-file       "/var/named/data/cache_dump.db";
        statistics-file "/var/named/data/named_stats.txt";
        memstatistics-file "/var/named/data/named_mem_stats.txt";
        recursing-file  "/var/named/data/named.recursing";
        secroots-file   "/var/named/data/named.secroots";
        //allow-query     { localhost; };

        /*
         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.
         - If you are building a RECURSIVE (caching) DNS server, you need to enable
           recursion.
         - If your recursive DNS server has a public IP address, you MUST enable access
           control to limit queries to your legitimate users. Failing to do so will
           cause your server to become part of large scale DNS amplification
           attacks. Implementing BCP38 within your network would greatly
           reduce such attack surface
        */
        recursion yes;

        dnssec-enable yes;
        dnssec-validation yes;

        /* Path to ISC DLV key */
        bindkeys-file "/etc/named.root.key";

        managed-keys-directory "/var/named/dynamic";

        pid-file "/run/named/named.pid";
        session-keyfile "/run/named/session.key";
};

logging {
        channel default_debug {
                file "data/named.run";
                severity dynamic;
        };
};

zone "." IN {
        type hint;
        file "named.ca";
};

zone "localdomain" IN {
                type master;
                file "localdomain.zone";
                allow-update { none; };
};

zone "100.168.192.in-addr.arpa." IN {
                type master;
                file "100.168.192.in-addr.arpa";
                allow-update { none; };
};


include "/etc/named.rfc1912.zones";
include "/etc/named.root.key";


[root@dnssrv named]#  vi /var/named/localdomain.zone
[root@dnssrv ~]# cat /var/named/localdomain.zone 
$TTL    86400
@               IN SOA  dnssrv.localdomain. root.localdomain. (
                                        42              ; serial (d. adams)
                                        3H              ; refresh
                                        15M             ; retry
                                        1W              ; expiry
                                        1D )            ; minimum
                IN NS   dnssrv.localdomain.
dnssrv          IN A    192.168.0.149
rac1            IN A    192.168.0.101
rac2            IN A    192.168.0.102
rac1-priv       IN A    192.168.1.101
rac2-priv       IN A    192.168.1.102
rac1-vip        IN A    192.168.0.111
rac2-vip        IN A    192.168.0.112
rac-scan        IN A    192.168.0.121
rac-scan        IN A    192.168.0.122
rac-scan        IN A    192.168.0.123





[root@dnssrv named]# vi /var/named/100.168.192.in-addr.arpa
[root@dnssrv ~]# cat /var/named/100.168.192.in-addr.arpa
$TTL 1H
@       IN      SOA     dnssrv.localdomain.     root.dnssrv.localdomain. (      2
                                                3H
                                                1H
                                                1W
                                                1H )
100.168.192.in-addr.arpa.         IN NS      dnssrv.localdomain.
91     IN PTR  rac-scan
92     IN PTR  rac-scan
93     IN PTR  rac-scan




[root@dnssrv named]# cat /etc/resolv.conf
# Generated by NetworkManager
search localdomain
nameserver 192.168.100.149

chattr +i /etc/resolv.conf



[root@dnssrv named]# systemctl start named
[root@dnssrv named]# systemctl status named

chkconfig named on


